<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Gravity - Stenosi</title>
</head>

<body>

    <script src="matter.js"></script>
    <script>
        let engine = Matter.Engine.create();
        engine.world.gravity.y = 1;

        let screenWidth = window.innerWidth;
        let screenHeight = window.innerHeight;

        let render = Matter.Render.create({
            element: document.body,
            engine: engine,
            options: {
                width: screenWidth,
                height: screenHeight,
                wireframes: false
            }
        });

        let groundWidth = screenWidth;
        let groundHeight = 100;
        let groundX = screenWidth / 2;
        let groundY = screenHeight + groundHeight / 2;

        let ground = Matter.Bodies.rectangle(groundX, groundY, groundWidth, groundHeight, { isStatic: true });

        let mouse = Matter.Mouse.create(render.canvas);
        let mouseConstraint = Matter.MouseConstraint.create(engine, {
            mouse: mouse,
            constraint: {
                stiffness: 0.2,
                render: { visible: false }
            }
        });
        render.mouse = mouse;

        let stack = Matter.Composites.stack(200, 200, 4, 4, 0, 0, function (x, y) {
            return Matter.Bodies.rectangle(x, y, 40, 40);
        });

        Matter.World.add(engine.world, [ground, stack, mouseConstraint]);

        let runner = Matter.Runner.create();
        Matter.Runner.run(runner, engine);

        Matter.Render.run(render);

        // Rilevamento del passaggio del mouse
        Matter.Events.on(mouseConstraint, 'mousemove', function (event) {
            let foundBodies = Matter.Query.point(stack.bodies, event.mouse.position);
            if (foundBodies.length > 0) {
                render.canvas.style.cursor = 'pointer';
            } else {
                render.canvas.style.cursor = 'default';
            }
        });
    </script>

</body>

</html>